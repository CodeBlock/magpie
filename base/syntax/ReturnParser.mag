// Keyword parser for "return" expressions.
class ReturnParser
    def parse(parser MagpieParser -> Expression)
        parser consume("return")
        %if%(parser lookAheadAny(TokenType line, TokenType rightParen,
                TokenType rightBrace, TokenType rightBracket),
            ReturnExpression new(value: NothingExpression new()),
            ReturnExpression new(value: parser parseExpression()))
    end
end

MagpieParser registerParseword("return", ReturnParser new())
